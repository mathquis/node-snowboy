language: node_js
node_js:
- 13
jobs:
  include:
  - os: linux
    arch: amd64
  - os: linux
    arch: arm64
compiler: gcc
before_install:
- sudo apt-get update -qq
- sudo apt-get install libblas-dev
- export PATH=./node_modules/.bin/:$PATH
- npm install node-gyp -g
- npm install node-pre-gyp node-pre-gyp-github
- PUBLISH_BINARY=true
- if [[ "$TRAVIS_TAG" == "" ]]; then PUBLISH_BINARY=false; fi;
- echo "Publish binary = $PUBLISH_BINARY"
install:
- node-pre-gyp configure build
before_script:
- if [[ $PUBLISH_BINARY == true ]]; then node-pre-gyp package; fi;
- if [[ $PUBLISH_BINARY == true ]]; then node-pre-gyp-github publish --release; fi;
- node-pre-gyp clean
- node-gyp clean
script:
- INSTALL_RESULT=0
- if [[ $PUBLISH_BINARY == true ]]; then INSTALL_RESULT=$(npm install --falback-to-build=false
  > /dev/null)$? || true; fi;
- echo "Install result = $INSTALL_RESULT"
- if [[ $INSTALL_RESULT != 0 ]]; then echo "returned $INSTALL_RESULT"; node-pre-gyp-github
  unpublish; false; fi;
- node-pre-gyp clean
after_success:
- node-pre-gyp-github info
deploy:
  provider: npm
  on:
    tags: true
    condition: "$TRAVIS_CPU_ARCH = amd64 && $TRAVIS_OS_NAME = linux"
  email: fastjack79@yahoo.com
  api_key:
    secure: B4hB4/0i8VaqgkwBSHufAjE3F5WOz6UzbwXF25a8nmpBPaDvLz/1rts0FRjo50cIUj8oHctLhR4ixIxwL2fSKm35iDfJgokrk/nxGeNtY78Nt097qQ1ppQkbPMNqgz1hpIhoiYWQzAfz5MttJKy4RkJT4oKiYsbSnfqmUfWHNol+jnV72FC6vPBbUwboiPbREdLQpFAH8uevDZi3gTqwQsUi2GRNIZ+lmh6X6acnUwL4OkDBslshUmRv88YrPjuKJOlDQ43PGodFmpkMzC0XuL+FkH84A98he4HSbJ5qf38rjUq8xPvk5eDYnXscBLle51XL4de6THF5hTKhC4jC3eaJzkC6LtGLTKjKWcVVXjzkBT+dpAEPiHqlWSsGiNKinyaA+BO11R957W2N07tfUry0uAyw5OEaHASa3Aca+Qzp/M/o5ZBHyWAC0YVzPFZq0IQtmPOF2lBCdssXVb6FKSXRj34mNDLt5Eq4ilcFIqANtZqF7gIJ5yMOjkcGwGDgWG7+xWnV+pTlnC67ZGucG9NivKwbr2KajxIUrucYKHYikwZWAvgXe6rT+WytR+IZjbQVvWclzb9XrjPA8nqt3FBeyAENoPHGgv72ZQleMDyiNDse/lVgWimnkOBXAUAl7JVIRIA3wKQ/QU+Qs22tvJVVtyLLE4+scHTP4fEL8N0=
env:
  global:
  - secure: C6GcjomZAuO1NfvfCXpdIlhYnwI26pX5TrdBpIXD1cwAL40sqkw+XomHmy3gTTGCPlnNenE+KNq0juGutVMmDHix7zKhcDcZ1PrTov6lgAJLnkGaKeaJY5ckcEM4WNmj4jTKqHjXwE67tY6jKxlZwSbgnkafMbgc5WSvKNPpeIIKW+OMzyIT/WYYwsO3fSUDQSgZfL59jx21ErrNBz9fyakTjPKM74T/fyRdocfeCL2djcfxnAeXGoqVO+sFOIwH2+Kdu9m9eK1Mqg2eeL58BbuHZb/BjER27VkUwEy6tQ9oohmpJ6+hql19eb2dFvRjdewjZNfiTwed4qNCuCtBZg2ZJPyog8/6ejnAytDuM4pf7K3h7O9mUQCzZn8vAxblj+xGZprWjE6l1O+6PwQuC86var14qy5DMXc6VJTVtDLOWRH85ijHeTv1NY0tJIdShhAfl91lxrbsq4xgVN1LPHhPIFoj1kv1l6vDv9o8g7+DGGqJW4L1bVbnnoS/dhCoLbwkz3AfsrObD4p8XW3I5QEi46NJNtbLkRD+pAnxUpNxwYy7K9PtjdFPN+Xvm+avbukDNKB8N3nnStImyobkmkao348nQEkgOHc5fy70czvODLcjyotPKdi06j/ESPQoKk0Fdu6/Fyfn9bqE9YN7XPCJDe9rLVRpm1BU20UiN9U=
